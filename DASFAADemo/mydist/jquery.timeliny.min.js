!function(t){function a(a,e){function i(){N("onInit"),n(),o(),r(),l(),c(),u(),d(),f(),m(),v(),s()}function n(){w.detach().sort(function(a,i){return"asc"===e.order?t(a).data("year")-t(i).data("year"):t(i).data("year")-t(a).data("year")}),g.append(w)}function s(){g.addClass("loaded");var t=g.find("."+e.className+"-timeblock.active").first().attr("data-year");N("afterLoad",[t])}function o(){var t=parseInt(w.first().attr("data-year")),a=parseInt(w.last().attr("data-year"));if("asc"===e.order)for(var i=t-e.boundaries;i<a+e.boundaries+1;i++)w.parent().find("[data-year="+i+"]").length<=0&&(i>t-e.boundaries?w.parent().find("[data-year="+(i-1)+"]").after('<div data-year="'+i+'" class="inactive"></div>'):w.first().before('<div data-year="'+i+'" class="inactive"></div>'));else for(var i=t+e.boundaries;i>=a-e.boundaries;i--)w.parent().find("[data-year="+i+"]").length<=0&&(i<t+e.boundaries?w.parent().find("[data-year="+(i+1)+"]").after('<div data-year="'+i+'" class="inactive"></div>'):w.first().before('<div data-year="'+i+'" class="inactive"></div>'));w=g.children()}function r(){return g.addClass(e.className).children().wrapAll(e.wrapper).wrapAll('<div class="'+e.className+'-timeline"></div>')}function c(){var t=.8*g.css("padding-top").replace("px","");g.find("."+e.className+"-timeline").css("width",""+w.length*t+"px"),g.find("."+e.className+"-timeliny-timeblock").css("width",""+t+"px")}function l(){w.each(function(a){var i=t(this).html(),n=t(this).attr("data-year"),s='<a href="#'+n+'" class="'+e.className+'-dot" data-year="'+n+'" data-text="'+i+'"></a>';t(this).addClass(""+e.className+"-timeblock").html(s)})}function d(){g.append('<div class="'+e.className+'-vertical-line"></div>')}function f(t){var a,i=g.find("."+e.className+"-vertical-line").position().left,n=g.find("."+e.className+"-timeblock.active").position().left,s=g.find("."+e.className+"-timeblock.active ."+e.className+"-dot").width()/2,o=n-i;a=o>0?"-"+(Math.abs(o)+s+1):"+"+(Math.abs(o)-s-1),g.find("."+e.className+"-timeline").animate({left:a},e.animationSpeed,function(){if("undefined"!=typeof t)if("click"===t){var a=g.find("."+e.className+"-timeblock.active").first().attr("data-year");N("afterChange",[a])}else"resize"===t&&N("afterResize")})}function u(){w.parent().find("."+e.className+"-timeblock:not(.inactive) ."+e.className+"-dot").on("click",function(a){a.preventDefault();var i=t(this).parent().parent().find("."+e.className+"-timeblock.active").attr("data-year"),n=t(this).attr("data-year");return i!=n&&(N("onLeave",[i,n]),w.removeClass("active"),t(this).closest("."+e.className+"-timeblock").addClass("active")),f("click"),!1})}function m(){function a(t,a){var e;return function(){var i=arguments,n=this;clearTimeout(e),e=setTimeout(function(){t.apply(n,i)},a)}}t(window).on("resize.timeliny",a(function(){f("resize")},350))}function v(){function a(t){s=t,r=o-s.offsetLeft}function i(t){o=document.all?window.event.clientX:t.pageX,null!==s&&(s.style.left=o-r+"px")}function n(){if(s){var a=g.find("."+e.className+"-vertical-line").offset().left,i=null,n=1e23;w.parent().find("."+e.className+"-timeblock:not(.inactive) ."+e.className+"-dot").each(function(e){var s=t(this).offset().left,o=Math.abs(s-a);n>o&&(console.log(t(this).attr("data-year")),i=t(this).attr("data-year"),n=o)}),g.find("."+e.className+"-dot[data-year="+i+"]").trigger("click"),s=null}}var s=null,o=0,r=0;g.first().on("mousedown",function(){return a(g.find("."+e.className+"-timeline")[0]),!1}),t(document).on("mousemove.timeliny",function(t){i(t)}),t(document).on("mouseup.timeliny",function(){n()})}function y(t){var a=g.find("."+e.className+"-timeblock[data-year="+t+"]:not(.inactive) ."+e.className+"-dot").first();a.length>0&&a.trigger("click")}function p(t,a){return a?void(e[t]=a):e[t]}function h(){g.each(function(){var a=t(this);t(window).off("resize.timeliny"),a.find("."+e.className+"-timeblock:not(.inactive) ."+e.className+"-dot").off("click"),t(document).off("mousemove.timeliny"),t(document).off("mouseup.timeliny"),a.first().off("mousedown"),a.remove(),N("onDestroy"),a.removeData("plugin_timeliny")})}function N(t,a){void 0!==e[t]&&e[t].apply(b,a)}var b=a,g=t(a),w=g.children();return e=t.extend({},t.fn.timeliny.defaults,e),i(),{option:p,destroy:h,goToYear:y}}t.fn.timeliny=function(e){if("string"==typeof arguments[0]){var i,n=arguments[0],s=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!t.data(this,"plugin_timeliny")||"function"!=typeof t.data(this,"plugin_timeliny")[n])throw new Error("Method "+n+" does not exist on jQuery.timeliny");i=t.data(this,"plugin_timeliny")[n].apply(this,s)}),void 0!==i?i:this}return"object"!=typeof e&&e?void 0:this.each(function(){t.data(this,"plugin_timeliny")||t.data(this,"plugin_timeliny",new a(this,e))})},t.fn.timeliny.defaults={order:"asc",className:"timeliny",wrapper:'<div class="timeliny-wrapper"></div>',boundaries:2,animationSpeed:250,onInit:function(){},onDestroy:function(){},afterLoad:function(t){},onLeave:function(t,a){},afterChange:function(t){},afterResize:function(){}}}(jQuery);